(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{127:function(e,t){},169:function(e,t,a){},170:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(0),s=a(10),c=a(20),u=a(214),i=a(208),o=function(e){var t=Object(r.useState)(""),a=Object(c.a)(t,2),s=a[0],o=a[1],l=Object(r.useRef)(""),j=function(){if(""===l.current.value)return!1;var t={user_name:e.userData.currentUserData.user_name,user_avatar:e.userData.currentUserData.user_avatar,message:l.current.value};e.onSendMessage(t),o("")};return Object(n.jsxs)("form",{className:"chat-form",autoComplete:"off",children:[Object(n.jsx)(u.a,{id:"standard-basic",label:"Write your message here",margin:"normal",multiline:!0,fullWidth:!0,rows:"4",inputRef:l,onChange:function(e){return o(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),j())},value:s}),Object(n.jsx)(i.a,{variant:"contained",color:"primary",onClick:j,children:"Send"})]})},l=a(207),j=a(209),f=a(212),b=a(211),m=a(210),d=a(215),p=a(46),O=function(e){var t=e.messages;return Object(n.jsx)(l.a,{children:t.flatMap((function(e,t){return[Object(n.jsxs)(j.a,{alignItems:"flex-start",children:[Object(n.jsx)(m.a,{children:Object(n.jsx)(d.a,{alt:"Avatar alt text",src:e.user_avatar})}),Object(n.jsx)(b.a,{primary:e.user_name,secondary:Object(n.jsx)(r.Fragment,{children:Object(n.jsx)(p.a,{component:"span",variant:"body2",color:"textPrimary",children:e.message_text})})})]},t),Object(n.jsx)(f.a,{variant:"inset",component:"li"},"divider-"+t)]}))})},h=a(55),v=a(86),x=a.n(v),g=function(){var e=Object(r.useRef)(),t=Object(r.useState)([]),a=Object(c.a)(t,2),n=a[0],s=a[1];Object(r.useEffect)((function(){return e.current=x()("http://localhost:5001"),e.current.on("mostRecentMessages",(function(e){s((function(t){return Object(h.a)(e)}))})),e.current.on("newChatMessage",(function(e){var t=e.user_name,a=e.user_avatar,n=e.message_text;s((function(e){return[].concat(Object(h.a)(e),[{user_name:t,user_avatar:a,message_text:n}])}))})),function(){e.current.disconnect()}}),[]);return{messages:n,sendMessage:function(t){e.current.emit("newChatMessage",t)}}},y=function(e){var t=g(),a=t.messages,r=t.sendMessage;return Object(n.jsxs)("div",{children:[Object(n.jsx)(O,{messages:a}),Object(n.jsx)(o,{userData:e,onSendMessage:function(e){r(e)}})]})},_=a(54),D=a.n(_),w=a(87),C=a(213),M=a(90),S=a.n(M),k=a(88),R=a.n(k),U=a(89),E=a.n(U),F=function(e){var t=e.setUserDataForChat,a=Object(r.useState)(!1),s=Object(c.a)(a,2),o=s[0],l=s[1],j=Object(r.useRef)(""),f=Object(r.useRef)(""),b=function(){var e=Object(w.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("http://localhost:5002/api/upload",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e,a){if(""===e)return!1;if(void 0===a)t({user_name:e});else{l(!0);var n=new FormData;n.append("avatar",a);try{b(n).then((function(a){t({user_name:e,user_avatar:a.data.user_avatar_url})})).catch((function(e){alert(e)})).finally((function(){return l(!1)}))}catch(r){}}};return o?Object(n.jsx)(R.a,{type:"ThreeDots",color:"#2BAD60",height:100,width:100}):Object(n.jsxs)("form",{className:"login-form",autoComplete:"off",children:[Object(n.jsx)(u.a,{id:"chat-username",label:"Enter Username",margin:"normal",fullWidth:!0,rows:"1",inputRef:j,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),m(e.target.value,f.current.files[0]))}}),Object(n.jsxs)("label",{children:[Object(n.jsx)("input",{style:{display:"none"},id:"upload-avatar",name:"upload-avatar",ref:f,type:"file",accept:"image/x-png,image/gif,image/jpeg"}),Object(n.jsxs)(C.a,{color:"secondary",size:"small",component:"span","aria-label":"add",variant:"extended",children:[Object(n.jsx)(S.a,{})," Upload avatar"]}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{})]}),Object(n.jsx)(i.a,{variant:"contained",color:"primary",onClick:function(){m(j.current.value,f.current.files[0])},children:"Enter Chat"})]})},N=(a(169),function(){var e=Object(r.useState)(null),t=Object(c.a)(e,2),a=t[0],s=t[1];return null===a?Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("div",{className:"container-title",children:"Welcome to our Chat App"}),Object(n.jsx)(F,{setUserDataForChat:s})]}):Object(n.jsx)(y,{currentUserData:a})});a(73);Object(s.render)(Object(n.jsx)(N,{}),document.querySelector("#app"))}},[[170,1,2]]]);
//# sourceMappingURL=main.e3391fd7.chunk.js.map